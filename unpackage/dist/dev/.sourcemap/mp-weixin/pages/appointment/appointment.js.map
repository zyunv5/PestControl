{"version":3,"sources":["uni-app:///main.js","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?d422","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?e649","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?8714","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?241b","uni-app:///pages/appointment/appointment.vue","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?5164","webpack:////Users/apple/Documents/zyCode/PestControl/pages/appointment/appointment.vue?9f9a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;AACnB;AACA,8G;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;AACa;;;AAGvE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAy0B,CAAgB,yyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8C71B;AACA,0E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,sBACA,eACA,8BACA,uDACA,cACA,CACA,SACA,UADA,EACA;AACA,kBAFA,EAGA,WAHA,EAIA,UAJA,EAKA,SALA,EAMA,QANA,EAOA,UACA,2DADA,EAEA,2DAFA,EAGA,2DAHA,EAIA,2DAJA,EAKA,2DALA,EAMA,2DANA,EAOA,2DAPA,CAPA,EAgBA,eAhBA,EAiBA,gEAjBA,EAkBA,gBAlBA,EAmBA,QAnBA,EAoBA,SApBA,EAqBA,WArBA,EAsBA,MAtBA,EAuBA,aAvBA,CAuBA;AAvBA,MAyBA,CAjCA,EAkCA,YACA,MADA,oBACA;AACA,2CACA,aACA,CAJA,EAlCA,EAwCA,MAxCA,oBAwCA,CACA;AACA,2CACA,aACA,gBACA,kBADA,EAEA,YAFA,EAGA,cAHA;AAKA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GA5EA;AA6EA;AACA;AACA,cAFA,sBAEA,CAFA,EAEA,CAFA,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA;AAUA;AACA,eAXA,uBAWA,CAXA,EAWA,CAXA,EAWA;AACA;AACA;AACA;AACA,4CAJA,CAIA;AACA;AACA;AACA,KAlBA;AAmBA;AACA,aApBA,qBAoBA,IApBA,EAoBA,GApBA,EAoBA;AACA;AACA,2BADA;AAEA,mBAFA;AAGA,sDAHA;AAIA,+CAJA;AAKA,uDALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9CA;AA+CA;AACA,aAhDA,qBAgDA,CAhDA,EAgDA,CAhDA,EAgDA;AACA;AACA;AACA;AACA,KApDA;AAqDA;AACA,cAtDA,sBAsDA,GAtDA,EAsDA;AACA;AACA;AACA,KAzDA;AA0DA;AACA,cA3DA,sBA2DA,IA3DA,EA2DA;AACA;AACA;AACA,kCADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA,KArEA;AAsEA;AACA,WAvEA,qBAuEA;AACA;AACA,wBADA;AAEA,oBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAtFA;AAuFA,cAvFA,sBAuFA,MAvFA,EAuFA;AACA;AACA;AACA,wCADA;AAEA,qBAFA;AAGA;AACA,2CADA,EAHA;;AAMA;AACA,4CADA,EANA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAhBA;;AAkBA,KA3GA;AA4GA;AACA,cA7GA,wBA6GA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,yBADA;AAEA,2BAFA;AAGA,yBAHA;AAIA,+BAJA;AAKA,yGALA;;AAOA;AACA;AACA;AACA;AACA,8BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA,SANA,MAMA;AACA;AACA;AACA;AACA;AACA,6CADA;AAEA,4BAFA;AAGA;AACA,kDADA,EAHA;;AAMA,oEANA;AAOA,8BAPA;AAQA;AACA;AACA;AACA;AACA,yCADA;;AAGA,iBALA,MAKA;AACA;AACA,yCADA;AAEA,gCAFA;;AAIA;AACA,eApBA;;AAsBA,WAxBA,MAwBA;AACA;AACA,6CADA;AAEA,4BAFA;AAGA;AACA,kDADA,EAHA;;AAMA,oEANA;AAOA,8BAPA;AAQA;AACA;AACA;AACA;AACA,yCADA;;AAGA,iBALA,MAKA;AACA;AACA,yCADA;AAEA,gCAFA;;AAIA;AACA,eApBA;;AAsBA;AACA;AACA;AACA,KAjMA;AAkMA;AACA,SAnMA,mBAmMA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA,yCAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KArNA;AAsNA;AACA,aAvNA,qBAuNA,IAvNA,EAuNA,KAvNA,EAuNA,GAvNA,EAuNA,IAvNA,EAuNA;AACA;AACA;AACA;AACA,KA3NA;AA4NA;AACA,aA7NA,uBA6NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzOA;AA0OA;AACA,eA3OA,yBA2OA;AACA;AACA;AACA,eADA,mBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA,mBACA,GADA,EACA;AACA;AACA;AACA,oDADA;AAEA,gCAFA;AAGA;AACA,kCADA;AAEA,2CAFA,EAHA;;AAOA;AACA;AACA;AACA,mBAVA;;AAYA,eAbA,MAaA;AACA;AACA;AACA,aAlBA;;AAoBA,SA3BA;AA4BA,YA5BA,gBA4BA,GA5BA,EA4BA;AACA;AACA,SA9BA;;AAgCA,KA7QA;AA8QA;AACA,kBA/QA,4BA+QA;AACA,6CADA,CACA;AACA;AACA,qCADA;AAEA,iBAFA;AAGA,gCAHA;AAIA,mBAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhSA;AAiSA,UAjSA,oBAiSA;AACA;AACA;AACA,KApSA,EA7EA,E;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAsrC,CAAgB,smCAAG,EAAC,C;;;;;;;;;;;ACA1sC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/appointment/appointment.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/appointment/appointment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./appointment.vue?vue&type=template&id=4ce32746&\"\nvar renderjs\nimport script from \"./appointment.vue?vue&type=script&lang=js&\"\nexport * from \"./appointment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./appointment.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/appointment/appointment.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./appointment.vue?vue&type=template&id=4ce32746&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./appointment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./appointment.vue?vue&type=script&lang=js&\"","<template>\r\n\t<scroll-view scroll-y class=\"apponitment\">\r\n\t\t<image class=\"apponitment-title\" src=\"../../static/appointment-title.png\" mode=\"aspectFit\"></image>\r\n\t\t<image class=\"apponitment-title-form\" src=\"../../static/form_info.png\" mode=\"widthFix\"></image>\r\n\t\t<view class=\"apponitment-form\">\r\n\t\t\t<button class=\"form-login\" v-if=\"isLogin\" open-type=\"getUserInfo\" @getuserinfo='getUserInfo'></button>\r\n\t\t\t<input class=\"form-list\" placeholder-style=\"color:#e5e5e5;\" type=\"text\" placeholder=\"请填写您的姓名\" v-model=\"user\" />\r\n\t\t\t<input class=\"form-list\" placeholder-style=\"color:#e5e5e5;\" type=\"text\" placeholder=\"请填写您的联系方式\" v-model=\"phone\" />\r\n\t\t\t<picker class=\"form-list\" mode=\"selector\" :value=\"area\" :range=\"bgMap\" @change=\"areaChange\">\r\n\t\t\t\t<view class=\"pickerArea\" :class=\"[areaColor ? 'text-active' : '']\">{{ area }}</view>\r\n\t\t\t</picker>\r\n\t\t\t<textarea class=\"form-textarea\" placeholder-style=\"color:#e5e5e5;\" placeholder=\"请填写详细的楼号、楼层、门牌号等信息\" v-model=\"address\" />\r\n\t\t\t</view>\r\n\t\t<image class=\"apponitment-title-time\" src=\"../../static/appointment_time.png\" mode=\"widthFix\"></image>\r\n\t\t<view class=\"apponitment-time\">\r\n\t\t\t<view class=\"time-list time-year\">\r\n\t\t\t\t<picker mode=\"selector\" :value=\"year\" :range=\"years\" @change=\"yearChange($event)\">\r\n\t\t\t\t\t<view class=\"picker\">{{ year }}年</view>\r\n\t\t\t\t\t<image class=\"time-list-icon\" src=\"../../static/select_icon.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"time-list\">\r\n\t\t\t\t<picker mode=\"selector\" :value=\"month\" :range=\"months\" @change=\"monthChange($event)\">\r\n\t\t\t\t\t<view class=\"picker\">{{ month+1 }}月</view>\r\n\t\t\t\t\t<image class=\"time-list-icon\" src=\"../../static/select_icon.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"time-list\">\r\n\t\t\t\t<picker mode=\"selector\" :value=\"day\" :range=\"days\" @change=\"dayChange($event)\">\r\n\t\t\t\t\t<view class=\"picker\">{{ day+1 }}日</view>\r\n\t\t\t\t\t<image class=\"time-list-icon\" src=\"../../static/select_icon.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"apponitment-day\">\r\n\t\t\t<view class=\"day-item\" :class=\"{ 'day-item-active': item.active, 'day-item-full': item.isFull }\" v-for=\"item in dayTime\" :key=\"item.time\" @click=\"changeTime(item)\">\r\n\t\t\t\t<view class=\"item-text\">{{ item.noon }}</view>\r\n\t\t\t\t<view class=\"item-text\">{{ item.time }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"day-item day-next\" @click=\"nextDay\"><text>后一天</text></view>\r\n\t\t</view>\r\n\t\t<view class=\"apponitment-submit\" @click=\"submitForm\">提交订单</view>\r\n\t</scroll-view>\r\n</template>\r\n\r\n<script>\r\nimport urlConfig from '../../common/config.js';\r\nimport dayjs from 'dayjs';\r\nexport default {\r\n\tdata() {\r\n\t\tconst date = new Date();\r\n\t\tconst years = [];\r\n\t\tconst year = date.getFullYear();\r\n\t\tfor (let i = year; i <= date.getFullYear() + 10; i++) {\r\n\t\t\tyears.push(i);\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tyear,//当前年份\r\n\t\t\tyears,\r\n\t\t\tmonth:null,\r\n\t\t\tmonths:[],\r\n\t\t\tday:null,\r\n\t\t\tdays:[],\r\n\t\t\tdayTime: [\r\n\t\t\t\t{ noon: '上午', time: '09:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '上午', time: '11:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '下午', time: '13:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '下午', time: '15:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '下午', time: '17:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '下午', time: '19:00', active: false, isFull: false },\r\n\t\t\t\t{ noon: '下午', time: '21:00', active: false, isFull: false }\r\n\t\t\t],\r\n\t\t\tarea: '选择您所在区域',\r\n\t\t\tbgMap: [\"东城区\",\"西城区\",'朝阳区', '海淀区',\"丰台区\",\"石景山区\",\"通州区\",\"昌平区\"],\r\n\t\t\tareaColor: false,\r\n\t\t\tuser: '',\r\n\t\t\tphone: '',\r\n\t\t\taddress: '',\r\n\t\t\tid: '',\r\n\t\t\tisLogin:true//是否登录\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tdetail() {//是否是修改订单\r\n\t\t\tlet state = this.$store.state.detail;\r\n\t\t\treturn state;\r\n\t\t}\r\n\t},\r\n\tonShow() {\r\n\t\t//查看是否登录\r\n\t\tconst token = wx.getStorageSync('token');\r\n\t\tif (!token) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先登录再进行预约',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 3000\r\n\t\t\t});\r\n\t\t}\r\n\t\t//初始化当前时间\r\n\t\tthis.setCurrentTime()\r\n\t\t\r\n\t\t//查询预约情况\r\n\t\tlet nextDay = dayjs().add(1, 'day');\r\n\t\tthis.getNextDay(nextDay);\r\n\t\t\r\n\t\t//修改订单选项\r\n\t\tif (JSON.stringify(this.detail) !== '{}') {\r\n\t\t\tconst queryItem = JSON.parse(this.detail);\r\n\t\t\tconst date=dayjs(queryItem.time)\r\n\t\t\tthis.year=date.year()\r\n\t\t\tthis.month=date.month()\r\n\t\t\tthis.day=date.date()-1\r\n\t\t\tthis.dayTime.filter(item=>{\r\n\t\t\t\tif(item.time===`${date.hour()}:00`){\r\n\t\t\t\t\titem.active=true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tthis.id = queryItem.id;\r\n\t\t\tthis.areaColor=true;\r\n\t\t\tthis.user = queryItem.name;\r\n\t\t\tthis.phone = queryItem.phone;\r\n\t\t\tthis.address = queryItem.address;\r\n\t\t\tthis.area = queryItem.area;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 更改年份\r\n\t\tyearChange(e,m) {\r\n\t\t\tthis.year =m?this.year+1:this.years[e.target.value];\r\n\t\t\tconst beforeYear =m?this.year+1:this.years[e.target.value];\r\n\t\t\tconst afterDay = dayjs(`${beforeYear}-${this.month + 1}`).daysInMonth();\r\n\t\t\tthis.dayOrigin(afterDay,this.month + 1);\r\n\t\t\tconst addDay= dayjs(`${this.year}-${this.month + 1}-${this.day+1}`)\r\n\t\t\te===\"\"?\"\":this.getNextDay(addDay)\r\n\t\t},\r\n\t\t// 更改月份 e是手动操作 m是后一天修改\r\n\t\tmonthChange(e, m) {\r\n\t\t\tthis.month = m ? m - 1 : this.months[e.target.value] - 1;\r\n\t\t\tlet beforeMonth = m ? m : this.months[e.target.value];\r\n\t\t\tconst afterDay = dayjs(`${this.year}-${beforeMonth}`).daysInMonth();\r\n\t\t\tthis.dayOrigin(afterDay,beforeMonth);//更改天数\r\n\t\t\tconst addDay= dayjs(`${this.year}-${this.month + 1}-${this.day+1}`)\r\n\t\t\te===\"\"?\"\":this.getNextDay(addDay)\r\n\t\t},\r\n\t\t//更改不同月份天数\r\n\t\tdayOrigin(days,mon) {\r\n\t\t\tlet dayAfter = this.day,\r\n\t\t\t\tdayBefore = this.days,\n\t\t\t\tdayArray = [],\r\n\t\t\t\tcurrentMonth=dayjs().month()+1,\r\n\t\t\t\tcurrentDay=dayjs().date(),\r\n\t\t\t\tcurrentDays=dayjs().daysInMonth();\n\t\t\t\tconsole.log(dayAfter,currentDay,currentDays)\n\t\t\tif(mon===currentMonth){\r\n\t\t\t\tfor(let i=currentDay;i<=currentDays;i++){\r\n\t\t\t\t\tdayArray.push(i);\r\n\t\t\t\t}\n\t\t\t\tif(dayAfter<currentDay){\n\t\t\t\t\tthis.day=currentDay-1\n\t\t\t\t}\n\t\t\t\tthis.days = dayArray;\r\n\t\t\t}else{\r\n\t\t\t\tfor (let i = 1; i <= days; i++) {\r\n\t\t\t\t\tdayArray.push(i);\r\n\t\t\t\t}\n\t\t\t\tthis.days = dayArray;\n\t\t\t\t//判断是不是31号切换到30号\n\t\t\t\tif (dayAfter == '30') {\n\t\t\t\t\tthis.day = this.days[this.days.length - 1] - 1;\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 更改了日期\r\n\t\tdayChange(e, d) {\r\n\t\t\tthis.day = d ? d - 1 : this.days[e.target.value] - 1;\r\n\t\t\tconst addDay= dayjs(`${this.year}-${this.month + 1}-${this.day+1}`)\r\n\t\t\te===\"\"?\"\":this.getNextDay(addDay)\r\n\t\t},\r\n\t\t// 更改区域\r\n\t\tareaChange(val) {\r\n\t\t\tthis.area = this.bgMap[val.detail.value];\r\n\t\t\tthis.areaColor = true;\r\n\t\t},\r\n\t\t// 选中时间\r\n\t\tchangeTime(item) {\r\n\t\t\tif (item.isFull) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '该时间段已约满，请更换其他时间',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.dayTime.forEach(item => (item.active = false));\r\n\t\t\titem.active = true;\r\n\t\t},\r\n\t\t// 选择下一天\r\n\t\tnextDay() {\r\n\t\t\tlet year = this.year,\r\n\t\t\t\tmonth = this.month,\r\n\t\t\t\tday = this.day;\r\n\t\t\tlet addDay = dayjs(`${year}-${month + 1}-${day + 1}`).add(1, 'day');\r\n\t\t\tlet newYear = addDay.year();\r\n\t\t\tlet newMonth = addDay.month() + 1;\r\n\t\t\tlet newDay = addDay.date();\r\n\t\t\tthis.getNextDay(addDay);\r\n\t\t\tif(month+1==12&&day==30){\r\n\t\t\t\tthis.yearChange('', 1);\r\n\t\t\t}\r\n\t\t\tthis.monthChange('', newMonth);\r\n\t\t\tthis.dayChange('', newDay);\r\n\t\t\t\r\n\t\t},\r\n\t\tgetNextDay(addDay){\r\n\t\t\tlet that=this;\r\n\t\t\tuni.request({\r\n\t\t\t\turl: urlConfig + 'getTime',\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tdata:{\r\n\t\t\t\t\ttime:addDay.format(\"YYYY-MM-DD\")\r\n\t\t\t\t},\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tfor(let i=0;i<7;i++){\r\n\t\t\t\t\t\tif(res.data.data[i]>1){\r\n\t\t\t\t\t\t\tthat.dayTime[i].isFull=true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.dayTime[i].active=false\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//提交表单\r\n\t\tsubmitForm() {\r\n\t\t\tlet timeActive = this.dayTime.filter(item => item.active);\r\n\t\t\tlet m = this.month + 1 < 10 ? '0' + (this.month + 1) : this.month + 1;\r\n\t\t\tlet d = this.day + 1 < 10 ? '0' + (this.day + 1) : this.day + 1;\r\n\t\t\tif (!this.user) {\r\n\t\t\t\tthis.alert('', '请填写用户姓名');\r\n\t\t\t} else if (!/^1[3|4|5|6|7|8|9]\\d{9}$/.test(this.phone)) {\r\n\t\t\t\tthis.alert('', '请填写正确的手机号');\r\n\t\t\t} else if (this.area === '选择您所在区域') {\r\n\t\t\t\tthis.alert('', '请选择您所在区域');\r\n\t\t\t} else if (!this.address) {\r\n\t\t\t\tthis.alert('', '请填写您的详细地址');\r\n\t\t\t} else if (timeActive.length === 0) {\r\n\t\t\t\tthis.alert('', '请选择日期');\r\n\t\t\t} else if (this.checkTime(this.year, m, d, timeActive[0].time)) {\r\n\t\t\t\tthis.alert('', '所选日期早于当前日期');\r\n\t\t\t} else {\r\n\t\t\t\tlet form = {\r\n\t\t\t\t\tuser: this.user,\r\n\t\t\t\t\tphone: this.phone,\r\n\t\t\t\t\tarea: this.area,\r\n\t\t\t\t\taddress: this.address,\r\n\t\t\t\t\ttime: `${this.year}-${m}-${d} ${timeActive[0].time}:00`\r\n\t\t\t\t};\r\n\t\t\t\tconst token = wx.getStorageSync('token');\r\n\t\t\t\tconst username=wx.getStorageSync('userName')\r\n\t\t\t\tif (!token) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先登录再进行预约',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 1500\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showLoading()\r\n\t\t\t\t\tif(this.id){\r\n\t\t\t\t\t\tform.id=this.id;\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: urlConfig + 'update',\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdata: { token: token,username:username,form: form },\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tif (res.data.status === 1) {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../order/order'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提交失败，请检查网络环境',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: urlConfig + 'submit',\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdata: { token: token,username:username, form: form },\r\n\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tif (res.data.status === 1) {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../order/order'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提交失败，请检查网络环境',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t//弹出弹框\r\n\t\talert(title = '', msg = '', confirm, cancel) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tcontent: msg,\r\n\t\t\t\tshowCancel: cancel ? true : false,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tif (confirm) {\r\n\t\t\t\t\t\t\tconfirm();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (res.cancel) {\r\n\t\t\t\t\t\tif (cancel) {\r\n\t\t\t\t\t\t\tcancel();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//校验时间\r\n\t\tcheckTime(year, month, day, time) {\r\n\t\t\tlet date = new Date(`${year}-${month}-${day} ${time}:00`);\r\n\t\t\tconst nowDate = new Date();\r\n\t\t\treturn date.getTime() < nowDate.getTime();\r\n\t\t},\r\n\t\t//清空提交的表单\r\n\t\tresetForm() {\r\n\t\t\tthis.user = '';\r\n\t\t\tthis.phone = '';\r\n\t\t\tthis.area = '选择您所在区域';\r\n\t\t\tthis.areaColor = false;\r\n\t\t\tthis.address = '';\r\n\t\t\tconst date = new Date();\r\n\t\t\tthis.year = date.getFullYear();\r\n\t\t\t// this.month = date.getMonth();\r\n\t\t\t// this.day = date.getDate();\r\n\t\t\tthis.dayTime.forEach(item => (item.active = false));\n\t\t\tthis.setCurrentTime()\r\n\t\t},\r\n\t\t//用户登录\r\n\t\tgetUserInfo() {\r\n\t\t\tlet that = this\r\n\t\t\twx.getUserInfo({\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tconst userInfo = res.userInfo\r\n\t\t\t\t\tthat.userName = userInfo.nickName\r\n\t\t\t\t\tthat.userAvatar = userInfo.avatarUrl\r\n\t\t\t\t\twx.setStorageSync('userName', userInfo.nickName)\r\n\t\t\t\t\twx.setStorageSync('userAvatar', userInfo.avatarUrl)\r\n\t\t\t\t\twx.login({\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.code) {\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\turl: urlConfig + 'getOpenId',\r\n\t\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\tcode: res.code,\r\n\t\t\t\t\t\t\t\t\t\tname: userInfo.nickName\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\t\t\twx.setStorageSync('token', res.data.sig)\r\n\t\t\t\t\t\t\t\t\t\tthat.isLogin = false\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tconsole.log('登录失败！' + res.errMsg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t},\r\n\t\t\t\tfail(err) {\r\n\t\t\t\t\tconsole.log(\"用户未授权\")\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//初始化当前时间\r\n\t\tsetCurrentTime(){\r\n\t\t\tlet currentDay=dayjs();//获取当前的日子\r\n\t\t\tlet day=currentDay.date(),\r\n\t\t\tdays=currentDay.daysInMonth(),\r\n\t\t\tdayArr=[],\r\n\t\t\tmonth=currentDay.month(),\r\n\t\t\tmonthArr=[];\r\n\t\t\tfor(let i=day;i<=days;i++){\r\n\t\t\t\tdayArr.push(i)\r\n\t\t\t}\r\n\t\t\tfor(let i=month+1;i<=12;i++){\r\n\t\t\t\tmonthArr.push(i)\r\n\t\t\t}\r\n\t\t\tthis.day=day-1\r\n\t\t\tthis.days=dayArr\r\n\t\t\tthis.month=month\r\n\t\t\tthis.months=monthArr\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\tthis.$store.dispatch('clearDetail');\r\n\t\t\tthis.resetForm()\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.apponitment {\r\n\tbox-sizing: border-box;\r\n\twidth: 100%;\r\n\tpadding: 20rpx 4% 0 4%;\r\n}\r\n.apponitment-title {\r\n\twidth: 219rpx;\r\n\theight: 122rpx;\r\n\tdisplay: block;\r\n\tmargin-bottom: 48rpx;\r\n}\r\n.apponitment-title-form {\r\n\twidth: 271rpx;\r\n\theight: 45rpx;\r\n\tdisplay: block;\r\n\tmargin-bottom: 35rpx;\r\n}\r\n.apponitment-form {\r\n\twidth: 705rpx;\r\n\theight: 452rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-between;\r\n\tmargin-bottom: 35rpx;\r\n}\r\n.form-login{\r\n\tposition: absolute;\r\n\twidth: 685rpx;\r\n\theight: 452rpx;\r\n\tz-index:5;\r\n\tbackground-color: transparent;\r\n}\r\n.form-login::after {\r\n\t\tborder: none;\r\n\t}\r\n.form-list {\r\n\tbox-sizing: border-box;\r\n\twidth: 675rpx;\r\n\theight: 78rpx;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding-left: 30rpx;\r\n\tfont-size: 28rpx;\r\n\tmargin: 0 auto;\r\n}\r\n.form-list .pickerArea {\r\n\tline-height: 78rpx;\r\n\tcolor: #e5e5e5;\r\n}\r\n.form-textarea {\r\n\tbox-sizing: border-box;\r\n\twidth: 675rpx;\r\n\theight: 144rpx;\r\n\tbackground-color: #fff;\r\n\tborder-radius: 10rpx;\r\n\tpadding-top: 20rpx;\r\n\tpadding-left: 30rpx;\r\n\tfont-size: 28rpx;\r\n\tmargin: 0 auto;\r\n}\r\n.apponitment-title-time {\r\n\twidth: 430rpx;\r\n\theight: 47rpx;\r\n\tdisplay: block;\r\n\tmargin-bottom: 42rpx;\r\n}\r\n.apponitment-time {\r\n\twidth: 675rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\tmargin: 0 auto 32rpx;\r\n}\r\n.time-list {\r\n\twidth: 184rpx;\r\n\theight: 78rpx;\r\n\tborder-radius: 10rpx;\r\n\tbackground-color: #fff;\r\n\tcolor: #000;\r\n\ttext-align: center;\r\n\tline-height: 78rpx;\r\n\tposition: relative;\r\n}\r\n.time-list-icon {\r\n\tposition: absolute;\r\n\tright: 8%;\r\n\ttop: 50%;\r\n\ttransform: translate(0, -50%);\r\n\twidth: 25rpx;\r\n\theight: 15rpx;\r\n}\r\n.time-year {\r\n\twidth: 258rpx;\r\n}\r\n.apponitment-day {\r\n\twidth: 675rpx;\r\n\theight: 263rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\tflex-wrap: wrap;\r\n\tmargin: 0 auto 30rpx;\r\n}\r\n.day-item {\r\n\tbox-sizing: border-box;\r\n\twidth: 156rpx;\r\n\theight: 115rpx;\r\n\tbackground-color: #fff;\r\n\tborder: 1rpx solid rgb(223, 223, 223);\r\n\tborder-radius: 10rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: space-around;\r\n\talign-items: center;\r\n\tpadding: 25rpx 0;\r\n\tfont-size: 25rpx;\r\n}\r\n.day-item .item-text {\r\n\twidth: 100%;\r\n\ttext-align: center;\r\n\tfont-size: 25rpx;\r\n}\r\n.day-next {\r\n\tbackground-color: rgb(255, 101, 16);\r\n\tcolor: #fff;\r\n}\r\n.day-item-active {\r\n\tbackground-color: rgb(255, 232, 225);\r\n\tcolor: #fff;\r\n\tborder: 1rpx solid rgb(255, 101, 16);\r\n}\r\n.day-item-full {\r\n\tbackground-color: rgb(226, 226, 226);\r\n\tcolor: #fff;\r\n\tborder: 1rpx solid rgb(192, 192, 192);\r\n}\r\n.apponitment-submit {\r\n\twidth: 675rpx;\r\n\theight: 96rpx;\r\n\tline-height: 96rpx;\r\n\ttext-align: center;\r\n\tbackground-color: rgb(21, 23, 44);\r\n\tcolor: #fff;\r\n\tborder-radius: 10rpx;\r\n\tmargin: 0 auto 20rpx;\r\n}\r\n.form-list .text-active {\r\n\tcolor: #000;\r\n}\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./appointment.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./appointment.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1617717918257\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}